# ダッシュボード スコア算出根拠

このドキュメントでは、分析ダッシュボードに表示されるスコアがどのように算出されているかを説明します。

---

## 1. 総合スコア（組織平均スコア）

**算出方法**: 5つのリテラシー次元の平均値（0〜100点）

```
総合スコア = (基礎知識 + プロンプト工学 + 倫理・リスク + ツール選定 + 自動化/活用) ÷ 5
```

- 各次元は0〜100点の範囲
- 小数点以下は四捨五入

---

## 2. 5次元リテラシースコア

アンケートの「**AI活用レベル自己評価**」質問（ランク形式）から算出されます。

| 次元 | 説明 |
|------|------|
| **基礎知識** | AIの基本概念・仕組みの理解度 |
| **プロンプト工学** | プロンプトの書き方・チューニングの習熟度 |
| **倫理・リスク** | AI利用における倫理・リスクの理解 |
| **ツール選定** | 用途に合ったAIツールの選定能力 |
| **自動化/活用** | 業務へのAI自動化・活用の実践度 |

### ランクからスコアへの変換

回答者が選択したランク（rank1〜rank5）は、次のように点数に変換されます。

| ランク | 基準スコア |
|--------|------------|
| rank1 | 20点 |
| rank2 | 40点 |
| rank3 | 60点 |
| rank4 | 80点 |
| rank5 | 100点 |

各次元のスコアは、基準スコアに ±5 程度のばらつきを持たせて算出されます。

---

## 3. 組織平均スコアの計算

複数の回答者がいる場合、**法人ごとに**次の手順で平均を算出します。

1. 各回答者のアンケート回答から、5次元スコアを算出
2. 各次元ごとに全回答者の平均を計算
3. 小数点以下を四捨五入

---

## 4. ランクとの対応

総合スコアに応じて、次のランクが付与されます（`rankCalculationService.ts`）。

| 総合スコア | ランク |
|------------|--------|
| 80点以上 | ランク5 |
| 60点以上 | ランク4 |
| 40点以上 | ランク3 |
| 20点以上 | ランク2 |
| 20点未満 | ランク1 |

※ 法人ごとにランク定義をカスタム可能（ランク定義設定画面）

---

## 5. その他の指標

### 総削減時間

アンケートの「**業務時間削減効果**」質問の回答から集計します。

| 選択肢 | 換算時間（週あたり） |
|--------|----------------------|
| 5時間未満 | 2.5h |
| 5〜10時間 | 7.5h |
| 10〜20時間 | 15h |
| 20時間以上 | 25h |
| 効果なし | 0h |

全回答者の換算時間を合計した値が「総削減時間」として表示されます。

### 削減率

```
削減率 = (総削減時間 ÷ 総労働時間) × 100
```

- 総労働時間 = 回答者数 × 40時間/週（想定）

---

## 6. ランク分布・平均ランク・回答率

### ランク分布

各回答者の**最新の回答**からスコアを算出し、ランク1〜5に分類した人数の分布です。

- 回答者ごとに最新の回答のみを使用（複数回答がある場合は最新のみ）
- スコアからランクを決定（80点以上=ランク5、60点以上=ランク4、…）

### 平均ランク

全回答者のランク（1〜5）の平均値です。

```
平均ランク = (ランク1の人数×1 + ランク2の人数×2 + … + ランク5の人数×5) ÷ 回答者数
```

- 1.0〜5.0の範囲（小数点第1位まで表示）

### 回答率

組織メンバーに対する回答者の割合です。

```
回答率 = (回答者数 ÷ 組織メンバー数) × 100
```

- 組織メンバー数は法人の `memberCount`（profiles テーブルの人数）
- 回答者数は重複を除いたユニークな回答者数

---

## 7. 関連ファイル

- `services/literacyScoreService.ts` … スコア算出ロジック
- `services/rankCalculationService.ts` … ランク算出（getRankFromScore）
- `constants.tsx` … LITERACY_DIMENSIONS（5次元の定義）
